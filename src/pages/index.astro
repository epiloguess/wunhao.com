---
import { getEntry } from "astro:content";

import Layout from "../layouts/BaseLayout.astro";
import Posts from "../components/index/Posts.astro";
const page = await getEntry("blog", "aboutme");
const { Content } = await page.render();
import { Image } from "astro:assets";
import cover from "../assets/cover.jpg";

import { getCollection } from "astro:content";
const allPosts = await getCollection("docs");
const PostsStorted = allPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);
const PopularPosts = PostsStorted.filter((post) => post.data.popular == true);
---

<Layout title="Wun-Hao's Blog">
  <div class="flex flex-col gap-10">
    <section
      class="flex flex-col md:flex-row md:justify-between gap-2 items-center border-b border-gray-300 p-5 md:p-10"
    >
      <div class="prose-sm">
        <Content />
      </div>
      <Image
        src={cover}
        alt="cover"
        class="md:block rounded-full animate-rotate w-1/4"
      />
    </section>
    <Posts posts={PostsStorted} title="Latest" path="/posts" />
    <Posts posts={PopularPosts} title="Featured" path="/featured" />
  </div>
</Layout>

<style></style>
